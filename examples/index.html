<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hellow World | Native.js</title>
</head>
<body>
    <main id="app"></main>

    <template id="tpl-home">
        <h1 id="main-h1">Main Page</h1>
    </template>

    <template id="tpl-hello-world">
        <a n-href="/other-page">other page</a>
    </template>

    <template id="tpl-other-page">
        <h2>Other page</h2>
    </template>
    
    <!-- Custom Implementation -->
    <script type="module">
        import { createNativeJs, renderTemplate, NativeJsElement } from "/lib/index.js";
        const container = document.querySelector('#app');

        class MainElement extends NativeJsElement {
            constructor() {
                super({
                    name: 'main',
                    templateId: 'tpl-home',
                    host: container
                });
            }

            onInit() {
                console.log('initi captured fro main');
                const h1 = super.getChild('#main-h1');
                console.log(h1)
                if (h1) {
                    h1.innerText = 'Main Page - Loaded'
                }
            }
        }

        class HelloWorldElement extends NativeJsElement {
            constructor() {
                super({
                    name: 'hello-world',
                    templateId: 'tpl-hello-world',
                    host: container
                });
            }
        }

        class OtherPageElement extends NativeJsElement {
            constructor() {
                super({
                    name: 'other-page',
                    templateId: 'tpl-other-page',
                    host: container
                });
            }
        }

        const routes = [
            {
                pathname: '/',
                element: MainElement,
            },
            {
                pathname: '/hello-world',
                element: HelloWorldElement
            },
            {
                pathname: '/other-page',
                element: OtherPageElement
            }
        ]
        const nativeJs = createNativeJs(container, routes);
        nativeJs.run();

        window.nativeJs = nativeJs;
    </script>
</body>
</html>
